<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>

    <link href="styles/mystyles.css" rel="stylesheet">

    <title>Timelapse Project</title>
</head>
<body>

<script src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
<script src="https://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>

<div class="container">
    <div class="page-header">
        <h1>Timelapse Project <small>by Sergey Firsov</small></h1>
        <div class="text-right">
            <a href="https://github.com/carbone-kid/Timelapse_Project" class="btn btn-success">View on GitHub</a>
            <a href="https://github.com/carbone-kid/Timelapse_Project/zipball/master" class="btn btn-primary">Download .zip</a>
            <a href="https://github.com/carbone-kid/Timelapse_Project/tarball/master" class="btn btn-primary">Download .tar.gz</a>
        </div>
    </div>

    <div>
        <div class="row paragraph-header">
            <div class="col-sm-12">
                <h2>Welcome to the Timelapse Project!</h2>
            </div>
        </div>
        <div class="row paragraph">
            <div class="col-sm-5 paragraph-intro">
                <p>The Timelapse Project is the open source hardware and software project which is made to create dynamic time-lapse videos.</p>
                <p>It allows you to specify the sequence of commands. For example: rotate a camera to 30 degrees clockwise, then stay at that position for 10 minutes, then rotate a camera to 90 degrees counter clockwise. This sequence can be of arbitrary length. This is the example of timelapse which has been made by using this device.</p>
                <p>Using this instructions you should be able to make the device yourself. If after reading the instructions something remains unclear please ask, I will be happy to answer or correct these instructions.</p>
            </div>
            <div class="col-sm-6 paragraph-media">
                <div class="video">
                    <iframe width="560" height="315" src="https://www.youtube.com/embed/LD37sa3E49U" frameborder="0" allowfullscreen></iframe>
                </div>
            </div>
        </div>
        <div class="row paragraph-text">
            <div class="col-sm-12">
                <p>To make the device you will need:</p>
                <ol>
                    <li>WeMos D1 or WeMos D1 mini controller</li>
                    <li>A stepper motor driver board</li>
                    <li>A stepper motor</li>
                    <li>A ballhead camera mount</li>
                    <li>A rigid box</li>
                    <li>Tools to make a hole in the box and mount the stepper motor inside the box</li>
                    <li>Wires</li>
                    <li>2 LEDs of different colours</li>
                    <li>An infra red LED</li>
                    <li>Resistors to limit the current which is going through the LEDs</li>
                    <li>If you buy the controller boards without pre soldered pins you will need a soldering gun, solder and alcohol (or something else to clean the soldering parts).</li>
                </ol>
                <p>All this stuff can be bought from Chinese web stores and delivered to you by the post service.</p>
            </div>
        </div>
    </div>

    <div id="assembling-hardware">
        <div class="row paragraph-header">
            <div class="col-sm-12">
                <h2>Assembling hardware</h2>
            </div>
        </div>
        <div class="row paragraph">
            <div class="col-sm-5 paragraph-intro">
                <p>Basically all you need to do to create a hardware part of the device is to connect pins using wires.</p>
                <p>In the WeMos board you will find a number of pins. Most of the pins are programmable and have a positive polarity. These are the pins which are used in the project:</p>
                <ul>
                    <li>D7. - IR LED for controlling the camera.</li>
                    <li>D1. - The led which indicates that the wifi communication is established between the device and the wifi point.</li>
                    <li>D6. - The led which indicates that the power is on and the software is working.</li>
                    <li>D2, D4, D3, D5. - Pins to control the stepper motor. This pins should be connected to the stepper motor driver board.</li>
                </ul>
            </div>
            <div class="col-sm-6 paragraph-media">
                <div class="video">
                    <iframe width="560" height="315" src="https://www.youtube.com/embed/Svqt2nqabOE" frameborder="0" allowfullscreen></iframe>
                </div>
            </div>
        </div>
        <div class="row paragraph-text">
            <div class="col-sm-12">
                <p>All leds should be connected to pins via resistor to limit the current. To calculate a resistor value the Ohm law could be used. Let's say we have a led and it can handle a 20 mA current. Then:</p>
                by the Ohm law <mark>V = I * R</mark> <br>
                that means <mark>R = V / I</mark> <br>
                <mark>3.5 / (20 / 1000) = 175 ohm</mark>
                <p>It is not necessary to use a resistor with the exact value but the value should not be lower than the calculated value because the lifetime of the LED will be reduced. The value should not be much higher because the LED will be glowing dimmer.</p>
                <p>Also mind the polarity because it could blow. Ground pins of the WeMos D1 controller should be connected to the LEDs minus (cathode), and pins D1, D6 and D7 to the LEDs plus (anode).</p>
                <p>Most probably the way of connecting the stepper motor driver board should be very straightforward. If not, check the information about your driver in the internet.</p>
                <ol>
                    <li>It should have 4 input pins - these inputs should be connected to the pins D2, D4, D3, D5 of WeMos D1.</li>
                    <li>It should have 2 DC power supply inputs</li>
                    <li>It should have 4 output contacts to be connected to the stepper motor.</li>
                </ol>
            </div>
        </div>
    </div>

    <div id="installing-software">
        <div class="row paragraph-header">
            <div class="col-sm-12">
                <h2>Installing software</h2>
            </div>
        </div>
        <div class="row paragraph-text">
            <div class="col-sm-12">
                <p>After everything is wired together you need to install a software to the WeMos D1 board.</p>
                <ol>
                    <li>To do that Platformio should be installed to your computer. Install Platformio from the official site. You will find the installation manual there.</li>
                    <li>Download the source code for the Timelapse project from this repository and unpack it somewhere.</li>
                    <li>Enable the WiFi spot on your mobile phone.</li>
                    <li>Open the file timelapse.ino in your favorite code editor and find these two lines of code:<br> <mark>const char *SSID = "phone_wifi_spot_name";</mark><br> <mark>const char *PASSWORD = "wifi_password";</mark><br> Change the values to the name and password of your WiFi spot.</li>
                    <li>Connect WeMos D1 to your computer using the USB cable.</li>
                    <li>Run the command prompt and navigate to the folder with the source code. In the command line type: <mark>platformio run --target upload</mark></li>
                    <li>If everything is ok you should be able to see that the LED which is connected to D6 starts glowing. That means that the power is on and the software is working.</li>
                    <li>Then the LED connected to D1 should start glowing. If so WeMos D1 is successfully connected to your phone's spot.</li>
                    <li>Now to control your device from your phone you should find out the IP address of your device. Open the WiFi spot settings on your phone and look for the IP address of the device that is connected to it.</li>
                    <li>Open a web browser on your phone and type in the IP address you just found into the URL string.</li>
                    <li>You should see this page.</li>
                </ol>
            </div>
        </div>
    </div>

    <div id="controls-overview">
        <div class="row paragraph-header">
            <div class="col-sm-12">
                <h2>Control page description</h2>
            </div>
        </div>
        <div class="row paragraph">
            <div class="col-sm-5 paragraph-intro">
                <ol>
                    <li>To be able to operate cameras of different manufacturers you need to pick your manufacturer in drop down list.</li>
                    <li>Choose between normal mode and bulb mode. The normal mode is when the shutter speed settings is specifyed in the camera. Bulb mode is when the external device tells camera when to close the shutter. Use bulb mode if you need long exposure. Usually 1 second or more. To use bulb mode you should activate it in your camera. The bulb mode in my camera activates when I'm increasing the exposure to the maximum. Always use manual mode in your camera when shooting timelapses.</li>
                    <li>Shooting rate is the delay between each shot. The minimal posible value depends on your camera. If the value will be too small your camera will not be able to shoot at that rate.</li>
                    <li>Shutter open time is the exposure time in the bulb mode. Keep in mind that a camera might save photos much slower when the exposure is high. So usually you would want to make this value much smaller then the shooting rate value.</li>
                    <li>Then you have Add stay and Add move. By pressing these buttons you are specifying the sequence of stand still iterations and rotation iterations which your device will be making.</li>
                    <li>In the Stay iteration you are specifying how long the device will be staying still and shooting at that direction.</li>
                    <li>In the Move iteration you are specifying the rotation direction, the rotation angle and how many steps the stepper motor will make before taking each picture.</li>
                    <li>The Go! button sends your commands to the device and starts shooting. After that the device will not respond to you commands till it finishes the job. That is made to make sure there will be no time deviations between shots caused by the client-server communication.</li>
                    <li>After you press Go! button the IR led which is intend to control you camera should start blinking. You can see it blinking using the camera built in your phone. Look through the phone camera at the IR led. Unlike other leds IR leds usually have a very focused and narrow beam so you should look directly in front of it.</li>
                </ol>
            </div>
            <div class="col-sm-6 paragraph-media">
                <div class="picture">
                    <img src="https://github.com/carbone-kid/Timelapse_Project/raw/gh-pages/controls_overview.jpg" alt="The control page screenshot">
                </div>
            </div>
        </div>
        <div class="row paragraph-text">
            <div class="col-sm-12">
            </div>
        </div>
    </div>

    <div class="navbar navbar-default navbar-fixed-bottom text-center">
        <a onclick="onClickWelcome()" class="btn">Welcome</a>
        <a onclick="onClickAssemblingHardware()" class="btn">Hardware</a>
        <a onclick="onClickInstallingSoftware()" class="btn">Software</a>
        <a onclick="onClickControlsOverview()" class="btn">Controls overview</a>
    </div>
</div>

<script src="scripts/index.js"></script>

</body>
</html>
